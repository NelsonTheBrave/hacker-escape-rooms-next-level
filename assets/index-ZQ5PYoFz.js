(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(e){if(e.ep)return;e.ep=!0;const i=a(e);fetch(e.href,i)}})();class F{createElement(t,a,n,e,i){let o=document.createElement(t);return a&&(o.id=a),n&&(o.className=n),e&&(o.textContent=e),i&&(o.type=i),o}async createBookingPage(t){const a=this.createElement("div","bookingSceneContainer__Id","bookingSceneContainer__class",null);document.body.appendChild(a);const n=this.createElement("section","bookingSceneContainer__SectionId","bookingSceneContainer__SectionClass",null);a.appendChild(n);const e=this.createElement("h1",null,"bookingSceneContainer__h1Class",`Book room ${t.title} (step 1)`,null);n.appendChild(e);const i=this.createElement("p",null,"bookingSceneContainer__ArrivalTextClass","What date would you like to come?");n.appendChild(i);const o=this.createElement("label",null,"datelabel","Date");o.setAttribute("for","dateInputID"),n.appendChild(o);let s=new Date().toISOString().split("T")[0],l=document.createElement("input");l.setAttribute("type","date"),l.setAttribute("min",s),l.setAttribute("id","dateInputID"),l.classList.add("dateInput"),n.appendChild(l);const r=this.createElement("button","bookingSceneContainer__ContinueBtnID","bookingSceneContainer__ContinueBtnClass","Search available times",null);n.appendChild(r);const c=this.createElement("button","bookingSceneContainer__BackBtnID","bookingSceneContainer__BackBtnClass",null);n.appendChild(c);const u=this.createElement("a","bookingSceneContainer__ReturnBtnLinkID","bookingSceneContainer__BackBtnLinkClass","Back to challenges",null);u.href="challenges.html",c.appendChild(u),r.addEventListener("click",async()=>{let d=l.value,f=`https://lernia-sjj-assignments.vercel.app/api/booking/available-times?date=${d}&challenge=${t.id}`,x=(await(await fetch(f)).json()).slots;if(!d){alert("Please choose a date");return}n.style.display="none";const h=this.createElement("div","bookingSceneContainer__SecondSectionID","bookingSceneContainer__SecondSectionClass",null,null);a.appendChild(h);const M=this.createElement("h1",null,"bookingScene__SecondRoomH1Class",`Book Room ${t.title} (step 2)`,null);h.appendChild(M);const I=this.createElement("label",null,"userNameLabelClass","Name");I.setAttribute("for","bookingScene__SecondRoomInputNameID"),h.appendChild(I);const C=this.createElement("input","bookingScene__SecondRoomInputNameID","bookingScene__SecondRoomInputNameClass",null,"text");h.appendChild(C);const v=this.createElement("label",null,"E-MailClassLabel","E-mail");v.setAttribute("for","bookingScene__SecondRoomInputEmailID"),h.appendChild(v);const y=this.createElement("input","bookingScene__SecondRoomInputEmailID","bookingScene__SecondRoomInputEmailClass",null,"text");h.appendChild(y);const B=this.createElement("label",null,"SelectTimeClassLabel","What time?");h.appendChild(B),B.setAttribute("for","bookingScene__SecondRoomSelectTimeID");const b=this.createElement("select","bookingScene__SecondRoomSelectTimeID","bookingScene__SecondRoomSelectTimeClass",null,null);b.setAttribute("name","availableTimes"),h.appendChild(b),x.forEach(function(m){const _=document.createElement("option");_.value=m,_.text=m,b.appendChild(_)});const T=this.createElement("label","bookingScene__SecondRoomSelectParticipantslabelID","bookingScene__SecondRoomSelectParticipantslabelClass","How many participants?",null);h.appendChild(T),T.setAttribute("for","bookingScene__SecondRoomSelectParticipantsID");const k=this.createElement("select","bookingScene__SecondRoomSelectParticipantsID","bookingScene__SecondRoomSelectParticipantsClass",null,null);k.setAttribute("name","minMaxParticipants"),h.appendChild(k);const N=t.minParticipants,O=t.maxParticipants,A=[];for(let m=N;m<=O;m++)A.push(m);A.forEach(m=>{const _=document.createElement("option"),L=`${m} Participants `;_.value=m,_.text=L,k.appendChild(_)});const w=this.createElement("button","bookingSceneContainer__SecondRoomSubmitBtnID","bookingSceneContainer__SecondRoomSubmitBtnClass","Submit booking",null);h.appendChild(w);const R=this.createElement("button","bookingSceneContainer__SecondRoomBackBtnID","bookingSceneContainer__SecondRoomBackBtnClass","",null);h.appendChild(R);const P=this.createElement("a","bookingSceneContainer__LastSectionReturnBtnLinkID","bookingSceneContainer__LastSectionBackBtnLinkClass","Back to challenges",null);P.href="challenges.html",R.appendChild(P),w.addEventListener("click",async()=>{if(C.value===""||y.value===""){alert("Please type in your information");return}const m={date:d,name:C.value,email:y.value,challenge:t.id,participants:Number(k.value),time:b.value},L=await(await fetch("https://lernia-sjj-assignments.vercel.app/api/booking/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();console.log(L),h.style.display="none";const E=this.createElement("section","bookingSceneContainer__LastSectionID","bookingSceneContainer__LastSectionClass",null,null);a.appendChild(E);const j=this.createElement("h2","bookingSceneContainer__LastSectionh2ID","bookingSceneContainer__LastSectionh2Class","Thank You!",null);E.appendChild(j);const D=this.createElement("a","bookingSceneContainer__LastSectionLinkID","bookingSceneContainer__LastSectionLinkClass","Back to challenges",null);E.appendChild(D),D.href="challenges.html"})})}}class U{constructor(t,a){this.run(t,a)}run(t,a){const n=a.querySelectorAll(".challenges-container__challenge"),e=document.querySelector(".no-match-message");for(let o=0;o<n.length;o++){let g=n[o].querySelector("span").ariaValueNow;const s=n[o].querySelector(".challenges-container__challenge__title").textContent,l=n[o].querySelector(".challenges-container__challenge__text").textContent;t.rating[0]<=g&&t.rating[1]>=g&&t.tagsAndType.every(r=>n[o].classList.contains(r))&&(l.toUpperCase().includes(t.keyword.toUpperCase())||s.toUpperCase().includes(t.keyword.toUpperCase()))?n[o].style.display="":n[o].style.display="none"}let i=0;n.forEach(o=>{if(o.style.display=="")i++;else return}),i===0?e.style.display="":e.style.display="none"}}class ${constructor(){this.filterInfo={tagsAndType:[],rating:[0,5],keyword:""};const a=new URLSearchParams(window.location.search).get("type");a==="online"?this.filterInfo.tagsAndType=["online"]:a==="onsite"&&(this.filterInfo.tagsAndType=["onsite"])}render(t){const a=new U(this.filterInfo,t),n=document.querySelectorAll(".stars i"),e=document.querySelectorAll(".stars2 i");n.forEach((s,l)=>{let r=l+1;s.addEventListener("click",()=>{if(!(r>this.filterInfo.rating[1])){if(r==this.filterInfo.rating[0]){n.forEach(c=>{c.classList.remove("active")}),this.filterInfo.rating[0]=0,a.run(this.filterInfo,t);return}n.forEach((c,u)=>{l>u?c.classList.add("active"):l==u?(c.classList.add("active"),this.filterInfo.rating[0]=l+1):c.classList.remove("active")}),a.run(this.filterInfo,t)}})}),e.forEach((s,l)=>{let r=l+1;s.addEventListener("click",()=>{if(!(r<this.filterInfo.rating[0])){if(r==this.filterInfo.rating[1]&&this.filterInfo.rating[0]==0){e.forEach(c=>{c.classList.remove("active")}),this.filterInfo.rating[1]=0,a.run(this.filterInfo,t);return}e.forEach((c,u)=>{l>u?c.classList.add("active"):l==u?(c.classList.add("active"),this.filterInfo.rating[1]=l+1):c.classList.remove("active")}),a.run(this.filterInfo,t)}})}),document.querySelectorAll(".tagButton").forEach(s=>{s.addEventListener("click",()=>{if(s.classList.toggle("-active"),this.filterInfo.tagsAndType.includes(s.id))for(let l=0;l<this.filterInfo.tagsAndType.length;l++)this.filterInfo.tagsAndType[l]===s.id&&this.filterInfo.tagsAndType.splice(l,1);else this.filterInfo.tagsAndType.push(s.id);a.run(this.filterInfo,t)})});const o=document.querySelectorAll(".checkBoxContainer input");this.filterInfo.tagsAndType[0]=="onsite"&&(o[0].checked=!1),this.filterInfo.tagsAndType[0]=="online"&&(o[1].checked=!1),o.forEach(s=>{s.addEventListener("click",()=>{if(this.filterInfo.tagsAndType.includes(s.id))for(let l=0;l<this.filterInfo.tagsAndType.length;l++)this.filterInfo.tagsAndType[l]===s.id&&this.filterInfo.tagsAndType.splice(l,1);else this.filterInfo.tagsAndType.push(s.id);a.run(this.filterInfo,t)})});const g=document.querySelector("#textFilter");g.addEventListener("input",()=>{this.filterInfo.keyword=g.value,a.run(this.filterInfo,t)})}}class V{constructor(t){this.data=t}render(){let t=this.data;const a=document.createElement("div");a.id=this.data.id,a.classList.add("challenges-container__challenge"),a.classList.add(this.data.type);for(let d=0;d<this.data.labels.length;d++)a.classList.add(this.data.labels[d]);const n=document.createElement("img");n.classList.add("challenges-container__challenge__img"),n.src=this.data.image+"?image="+Math.floor(Math.random()*16),a.append(n);const e=document.createElement("div");e.classList.add("challenges-container__challenge__lowerWrapper"),a.append(e);const i=document.createElement("h3");i.classList.add("challenges-container__challenge__title"),i.textContent=this.data.title,e.append(i);const o=document.createElement("h3");o.classList.add("challenges-container__challenge__type"),o.textContent="("+this.data.type+")",e.append(o);const g=document.createElement("small");g.classList.add("challenges-container__challenge__rating"),e.append(g);const s=document.createElement("span");s.classList.add("challenges-container__challenge__rating__stars"),s.ariaLabel="Rating",s.role="meter",s.ariaValueMin="0",s.ariaValueMax="5",s.ariaValueNow=this.data.rating,g.append(s);function l(d,f){const S=document.createElement("i");S.classList.add("fa"),d<f-.5?S.classList.add("fa-star-o"):d===f-.5?S.classList.add("fa-star-half-o"):S.classList.add("fa-star"),S.ariaHidden=!0,s.append(S)}for(let d=1;d<6;d++)l(this.data.rating,d);const r=document.createElement("span");r.classList.add("challenges-container__challenge__rating__participants"),r.textContent=this.data.minParticipants===this.data.maxParticipants?`${this.data.minParticipants} participants`:`${this.data.minParticipants}-${this.data.maxParticipants} participants`,g.append(r);const c=document.createElement("p");c.classList.add("challenges-container__challenge__text"),c.textContent=this.data.description,e.append(c);const u=document.createElement("button");return u.classList.add("challenges-container__challenge__button"),u.textContent=this.data.type==="online"?"Take challenge online":"Book this room",e.append(u),u.addEventListener("click",()=>{new F().createBookingPage(t)}),a}}class q{async getChallenges(){return(await(await fetch("https://lernia-sjj-assignments.vercel.app/api/challenges")).json()).challenges.map(n=>new V(n))}}class H{async render(t){const n=await new q().getChallenges();for(let e=0;e<n.length;e++){const o=n[e].render();t.append(o)}new $().render(t)}}class W{async render(t){const n=(await new q().getChallenges()).sort((e,i)=>i.data.rating-e.data.rating);for(let e=0;e<3;e++){const o=n[e].render();t.append(o)}}}class z{render(){const t=document.querySelector(".filterDiv"),a=document.querySelector(".filterButton"),n=document.querySelector(".closeMenu");a.addEventListener("click",()=>{t.style.display="block",a.style.display="none"}),n.addEventListener("click",()=>{t.style.display="none",a.style.display="block"})}}class J{constructor(){document.querySelector(".navbar-button").addEventListener("click",this.Popup)}Popup(){const t=document.querySelector(".navBar");document.querySelector("body").style.overflow="hidden";const a=document.querySelector("html");a.setAttribute("class","--transparant"),setTimeout(()=>{a.classList.remove("--transparant"),t.setAttribute("class","navBar--popup")},200),t.addEventListener("click",n),visualViewport.onresize=n;function n(e){const i=document.querySelector(".navBar--popup");(e.target.nodeName==="BUTTON"||e.target.nodeName=="A"||e.target.width>900)&&i&&(i.setAttribute("class","navBar"),document.querySelector("body").style.overflow="auto")}}}const K=document.querySelector(".main-page"),Y=document.querySelector(".challenges-site");if(Y){const p=document.querySelector(".challenges-container.challenges-site");new H().render(p),new z().render()}if(K){const p=document.querySelector(".challenges-container.main-page");new W().render(p),new J}
